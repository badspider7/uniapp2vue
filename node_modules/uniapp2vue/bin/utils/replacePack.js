const fse = require('fs-extra');
const path = require('path');
const fs = require('fs');

//模板文件地址
const templatePath = __dirname.split('utils')[0] + 'template';
let packageJSON = {}; 

function getPackageJSON() { 
    return new Promise(async(res, rej) => {
        try {
            packageJSON = await fse.readJSON(path.join(templatePath, 'package.json'));
            res(packageJSON)
        } catch (err) {
            console.log('获取package.json失败', err)
            rej(err)
        } 
    })

}

//TODO: 测试json文件写入
getPackageJSON().then((res) => {
    fse.writeJSON(path.join(templatePath, 'backup.json'), res, err => {
        if (err) console.log('err', err)
        console.log('success')
    })
});

